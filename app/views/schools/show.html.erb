<p id="notice"><%= notice %></p>

<!-- <p>
  <strong>Name:</strong>
  <%#= @school.name %>
</p>

<p>
  <strong>Address:</strong>
  <%#= @school.address %>
</p>
 -->
<!-- <%= link_to 'Edit', edit_school_path(@school) %> | -->
<h1><%= @school.name %></h1>

<% if (3..5).include? @school.id %>
<h2>用電情況</h2>
<div class="row">
	<% @plugs.each do |plug| %>
		<div class="col-md-6">
			<h3><%= plug[:device] %></h3>
			<canvas id='<%= "myChart_#{plug[:device]}" %>' width="400" height="400"></canvas>
			<p style="margin-left:180px;">耗電量，單位瓦特(W)</p>
<!-- 			<p>目前耗電量：<%#= plug[:data][-1] %>W</p>
			<p>最後開關時間：<%#= (Time.now - rand(3).day - rand(12).hour - rand(30.minutes)).strftime('%y-%m-%d %H:%M') %></p>
			<p>今日開機時間：9H28M</p>
			<p>總開機時間：13D8H</p>
			<p>當前狀態：ON</p> -->
		</div>
		<%#= javascript_tag do %>
		<script type="text/javascript">
		  var ctx2 = document.getElementById('<%= "myChart_#{plug[:device]}" %>').getContext("2d");
		  var data = {
		      labels: <%= "#{plug[:labels]}".html_safe %>,
		      datasets: [
		          {
		              label: "My Second dataset",
		              fillColor: "rgba(151,187,205,0.5)",
		              strokeColor: "rgba(151,187,205,0.8)",
		              highlightFill: "rgba(151,187,205,0.75)",
		              highlightStroke: "rgba(151,187,205,1)",
		              data: <%= "#{plug[:data]}".html_safe %>
		          }
		      ]
		  };
		  var myLineChart = new Chart(ctx2).Line(data);
		</script>
		<%# end %>
	<% end %>
	<!-- <div class="col-md-6">
		<h3><%= ["飲水機","燈光控制","冷氣機","電風扇"].sample %></h3>
		<canvas id="myChart1" width="400" height="400"></canvas>
		<p style="margin-left:180px;">耗電量</p>
		<p>目前耗電量：<%= rand(20..40)%>W</p>
		<p>最後開關時間：2015-09-02 16:55:17</p>
		<p>今日開機時間：9H28M</p>
		<p>總開機時間：13D8H</p>
		<p>當前狀態：ON</p>
	</div>

	<div class="col-md-6">
		<h3><%= ["飲水機","燈光控制","冷氣機","電風扇"].sample %></h3>
		<canvas id="myChart2" width="400" height="400"></canvas>
		<p style="margin-left:180px;">耗電量</p>
		<p>目前耗電量：<%= rand(20..40)%>W</p>
		<p>最後開關時間：2015-09-02 16:55:17</p>
		<p>今日開機時間：9H28M</p>
		<p>總開機時間：13D8H</p>
		<p>當前狀態：ON</p>
	</div>

	<div class="col-md-6">
		<h3><%= ["飲水機","燈光控制","冷氣機","電風扇"].sample %></h3>
		<canvas id="myChart3" width="400" height="400"></canvas>
		<p style="margin-left:180px;">耗電量</p>
		<p>目前耗電量：<%= rand(20..40)%>W</p>
		<p>最後開關時間：2015-09-02 16:55:17</p>
		<p>今日開機時間：9H28M</p>
		<p>總開機時間：13D8H</p>
		<p>當前狀態：ON</p>
	</div>

	<div class="col-md-6">
		<h3><%= ["飲水機","燈光控制","冷氣機","電風扇"].sample %></h3>
		<canvas id="myChart4" width="400" height="400"></canvas>
		<p style="margin-left:180px;">耗電量</p>
		<p>目前耗電量：<%= rand(20..40)%>W</p>
		<p>最後開關時間：2015-09-02 16:55:17</p>
		<p>今日開機時間：9H28M</p>
		<p>總開機時間：13D8H</p>
		<p>當前狀態：ON</p>
	</div> -->
</div>

<% else %>

<h3>當前環境指標</h3>
<div class="row">
  <div class="col-md-6">
    <canvas id="myChart" width="400" height="400"></canvas>
    <!-- <p style="margin-left:180px;">當前參數</p> -->
  </div>
</div>
<hr /><br /><br /><br />
<h3>當前環境因子</h3>
<div class="row">
  <div class="col-md-6">
    <canvas id="myChart1" width="400" height="400"></canvas>
    <p style="margin-left:180px;">照度</p>
  </div>
  <div class="col-md-6">
    <canvas id="myChart2" width="400" height="400"></canvas>
    <p style="margin-left:180px;">濕度</p>
  </div>
  <div class="col-md-6">
    <canvas id="myChart3" width="400" height="400"></canvas>
    <p style="margin-left:180px;">二氧化碳度</p>
  </div>
  <div class="col-md-6">
    <canvas id="myChart4" width="400" height="400"></canvas>
    <p style="margin-left:180px;">溫度</p>
  </div>
</div>

<!-- <h3>學習</h3>
<div class="btn-group btn-group-justified" role="group">
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">2</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">4</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">6</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">8</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">10</button>
  </div>
</div>

<h3>環境</h3>
<div class="btn-group btn-group-justified" role="group">
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">2</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">4</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">6</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">8</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">10</button>
  </div>
</div>

<h3>節能</h3>
<div class="btn-group btn-group-justified" role="group">
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">2</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">4</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">6</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">8</button>
  </div>
  <div class="btn-group" role="group">
    <button type="button" class="btn btn-default">10</button>
  </div>
</div> -->

<br/><br/>
<%#= link_to "最佳化計算", @room, :class => "btn btn-primary btn-lg" %>
<h3>最佳化環境指標</h3>
<div class="row">
  <div class="col-md-6">
    <canvas id="myRadar1" width="400" height="400"></canvas>
    <!-- <p style="margin-left:180px;">最佳化參數</p> -->
  </div>
</div>
<h3>最佳化環境因子</h3>
<h4>建議照度：7115.41</h4>
<h4>建議濕度：64.8</h4>
<h4>建議二氧化碳度濃度：279.0</h4>
<h4>建議溫度：27.1</h4>

<%= javascript_tag do %>
	var ctx = document.getElementById("myChart").getContext("2d");
	var data = {
	    labels: ["節能指標", "學習環境指標", "舒適指標", "Designing", "Coding", "Cycling", "Running"],
	    datasets: [
	        {
	            label: "My First dataset",
	            fillColor: "rgba(255,235,205,0.2)",
	            strokeColor: "rgba(25,25,112,1)",
	            pointColor: "rgba(255,0,0,1)",
	            pointStrokeColor: "#fff",
	            pointHighlightFill: "#fff",
	            pointHighlightStroke: "rgba(220,220,220,1)",
	            data: [6, 9, 8]
	        }
		]
	};
	var myRadarChart = new Chart(ctx).Radar(data);

  var ctx = document.getElementById("myRadar1").getContext("2d");
  var data = {
      labels: ["節能指標", "學習環境指標", "舒適指標", "Designing", "Coding", "Cycling", "Running"],
      datasets: [
          {
              label: "My First dataset",
              fillColor: "rgba(255,235,205,0.2)",
              strokeColor: "rgba(25,25,112,1)",
              pointColor: "rgba(255,0,0,1)",
              pointStrokeColor: "#fff",
              pointHighlightFill: "#fff",
              pointHighlightStroke: "rgba(220,220,220,1)",
              data: [7, 9, 9]
          }
    ]
  };
  var myRadarChart = new Chart(ctx).Radar(data);

	var ctx1 = document.getElementById("myChart1").getContext("2d");
	var data = {
	    labels: ["<%= (Time.now - 6.hour).strftime("%H:00") %>", "<%= (Time.now - 5.hour).strftime("%H:00") %>", "<%= (Time.now - 4.hour).strftime("%H:00") %>", "<%= (Time.now - 3.hour).strftime("%H:00") %>", "<%= (Time.now - 2.hour).strftime("%H:00") %>", "<%= (Time.now - 1.hour).strftime("%H:00") %>", "<%= Time.now.strftime("%H:00") %>"],
	    datasets: [
	        {
	            label: "My Second dataset",
	            fillColor: "rgba(151,187,205,0.5)",
	            strokeColor: "rgba(151,187,205,0.8)",
	            highlightFill: "rgba(151,187,205,0.75)",
	            highlightStroke: "rgba(151,187,205,1)",
	            data: [(Math.random()*1000)%1000+5000,(Math.random()*1000)%1000+5000,(Math.random()*1000)%1000+5000,(Math.random()*1000)%1000+5000,(Math.random()*1000)%1000+5000,(Math.random()*1000)%1000+5000,(Math.random()*1000)%1000+5000,]
	        }
	    ]
	};
	var myBarChart = new Chart(ctx1).Line(data);

  var ctx2 = document.getElementById("myChart2").getContext("2d");
  var data = {
      labels: ["<%= (Time.now - 6.hour).strftime("%H:00") %>", "<%= (Time.now - 5.hour).strftime("%H:00") %>", "<%= (Time.now - 4.hour).strftime("%H:00") %>", "<%= (Time.now - 3.hour).strftime("%H:00") %>", "<%= (Time.now - 2.hour).strftime("%H:00") %>", "<%= (Time.now - 1.hour).strftime("%H:00") %>", "<%= Time.now.strftime("%H:00") %>"],
      datasets: [
          {
              label: "My Second dataset",
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,0.8)",
              highlightFill: "rgba(151,187,205,0.75)",
              highlightStroke: "rgba(151,187,205,1)",
              data: [(Math.random()*100)%10+60,(Math.random()*100)%10+60,(Math.random()*100)%10+60,(Math.random()*100)%10+60,(Math.random()*100)%10+60,(Math.random()*100)%10+60,(Math.random()*100)%10+60,]
          }
      ]
  };
  var myBarChart = new Chart(ctx2).Line(data);

  var ctx3 = document.getElementById("myChart3").getContext("2d");
  var data = {
      labels: ["<%= (Time.now - 6.hour).strftime("%H:00") %>", "<%= (Time.now - 5.hour).strftime("%H:00") %>", "<%= (Time.now - 4.hour).strftime("%H:00") %>", "<%= (Time.now - 3.hour).strftime("%H:00") %>", "<%= (Time.now - 2.hour).strftime("%H:00") %>", "<%= (Time.now - 1.hour).strftime("%H:00") %>", "<%= Time.now.strftime("%H:00") %>"],
      datasets: [
          {
              label: "My Second dataset",
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,0.8)",
              highlightFill: "rgba(151,187,205,0.75)",
              highlightStroke: "rgba(151,187,205,1)",
              data: [(Math.random()*100)%80+250,(Math.random()*100)%80+250,(Math.random()*100)%80+250,(Math.random()*100)%80+250,(Math.random()*100)%80+250,(Math.random()*100)%80+250,(Math.random()*100)%80+250,]
          }
      ]
  };
  var myBarChart = new Chart(ctx3).Line(data);

  var ctx4 = document.getElementById("myChart4").getContext("2d");
  var data = {
      labels: ["<%= (Time.now - 6.hour).strftime("%H:00") %>", "<%= (Time.now - 5.hour).strftime("%H:00") %>", "<%= (Time.now - 4.hour).strftime("%H:00") %>", "<%= (Time.now - 3.hour).strftime("%H:00") %>", "<%= (Time.now - 2.hour).strftime("%H:00") %>", "<%= (Time.now - 1.hour).strftime("%H:00") %>", "<%= Time.now.strftime("%H:00") %>"],
      datasets: [
          {
              label: "My Second dataset",
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,0.8)",
              highlightFill: "rgba(151,187,205,0.75)",
              highlightStroke: "rgba(151,187,205,1)",
              data: [(Math.random()*10)%2+24,(Math.random()*10)%2+24,(Math.random()*10)%2+24,(Math.random()*10)%2+24,(Math.random()*10)%2+24,(Math.random()*10)%2+24,(Math.random()*10)%2+24,]
          }
      ]
  };
  var myBarChart = new Chart(ctx4).Line(data);
<% end %>

<% end %>

<%#= javascript_tag do %>

<%# end %>

<%= link_to '返回', schools_path %>

<%#
  var ctx2 = document.getElementById("myChart1").getContext("2d");
  var data = {
      labels: ["8:00", "9:00", "10:00", "11:00", "12:00", "13:00", "14:00"],
      datasets: [
          {
              label: "My Second dataset",
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,0.8)",
              highlightFill: "rgba(151,187,205,0.75)",
              highlightStroke: "rgba(151,187,205,1)",
              data: [Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20]
          }
      ]
  };
  var myLineChart = new Chart(ctx2).Line(data);

  var ctx2 = document.getElementById("myChart2").getContext("2d");
  var data = {
      labels: ["8:00", "9:00", "10:00", "11:00", "12:00", "13:00", "14:00"],
      datasets: [
          {
              label: "My Second dataset",
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,0.8)",
              highlightFill: "rgba(151,187,205,0.75)",
              highlightStroke: "rgba(151,187,205,1)",
              data: [Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20]
          }
      ]
  };
  var myLineChart = new Chart(ctx2).Line(data);

  var ctx2 = document.getElementById("myChart3").getContext("2d");
  var data = {
      labels: ["8:00", "9:00", "10:00", "11:00", "12:00", "13:00", "14:00"],
      datasets: [
          {
              label: "My Second dataset",
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,0.8)",
              highlightFill: "rgba(151,187,205,0.75)",
              highlightStroke: "rgba(151,187,205,1)",
              data: [Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20]
          }
      ]
  };
  var myLineChart = new Chart(ctx2).Line(data);

  var ctx2 = document.getElementById("myChart4").getContext("2d");
  var data = {
      labels: ["8:00", "9:00", "10:00", "11:00", "12:00", "13:00", "14:00"],
      datasets: [
          {
              label: "My Second dataset",
              fillColor: "rgba(151,187,205,0.5)",
              strokeColor: "rgba(151,187,205,0.8)",
              highlightFill: "rgba(151,187,205,0.75)",
              highlightStroke: "rgba(151,187,205,1)",
              data: [Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20, Math.random()*10+20]
          }
      ]
  };
  var myLineChart = new Chart(ctx2).Line(data);
%>